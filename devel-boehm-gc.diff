# HG changeset patch
# Parent 2cb2122257eb5eae043c86294cbf477e263f2033

diff -r 2cb2122257eb devel/boehm-gc/Makefile
--- a/devel/boehm-gc/Makefile	Tue Oct 09 17:59:35 2012 -0400
+++ b/devel/boehm-gc/Makefile	Tue Oct 09 17:59:40 2012 -0400
@@ -40,6 +40,9 @@
 CFLAGS+=		-D_XOPEN_SOURCE
 .endif
 
+# [Gregor] Without this, needs libc-specific data in (glibc) link.h
+CFLAGS+=	-DUSE_PROC_FOR_LIBRARIES -DNO_GETCONTEXT
+
 .include "options.mk"
 
 post-install:
diff -r 2cb2122257eb devel/boehm-gc/distinfo
--- a/devel/boehm-gc/distinfo	Tue Oct 09 17:59:35 2012 -0400
+++ b/devel/boehm-gc/distinfo	Tue Oct 09 17:59:40 2012 -0400
@@ -4,3 +4,4 @@
 RMD160 (gc-7.2d.tar.gz) = e3e191de01cc0f5b3b2570842e897c11fcc8d96d
 Size (gc-7.2d.tar.gz) = 1263064 bytes
 SHA1 (patch-ab) = b595e5fb653e078189ad6aadfd932b0c0e9fff4a
+SHA1 (patch-aq) = 89bbe084f50c7f0e457c7a221b4bafab38a77982
diff -r 2cb2122257eb devel/boehm-gc/patches/patch-aq
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/devel/boehm-gc/patches/patch-aq	Tue Oct 09 17:59:40 2012 -0400
@@ -0,0 +1,22 @@
+diff -r 748b34e952a7 dyn_load.c
+--- dyn_load.c	Mon Aug 20 22:47:08 2012 +0000
++++ dyn_load.c	Mon Aug 20 22:49:09 2012 +0000
+@@ -97,6 +97,7 @@
+     /* If you don't need the "dynamic loading" feature, you may build   */
+     /* the collector with -D IGNORE_DYNAMIC_LOADING.                    */
+ #   include <linker.h>
++# elif USE_PROC_FOR_LIBRARIES
+ # else
+ #   include <link.h>
+ # endif
+diff -r 748b34e952a7 os_dep.c
+--- os_dep.c	Mon Aug 20 22:47:08 2012 +0000
++++ os_dep.c	Mon Aug 20 22:49:09 2012 +0000
+@@ -26,6 +26,7 @@
+ #   define __KERNEL__
+ #   include <asm/signal.h>
+ #   undef __KERNEL__
++# elif 1
+ # else
+     /* Kernels prior to 2.1.1 defined struct sigcontext_struct instead of */
+     /* struct sigcontext.  libc6 (glibc2) uses "struct sigcontext" in     */
