# HG changeset patch
# Parent daa3b77407ddcec6deec0cd6b678eb40a088dfce

diff -r daa3b77407dd sysutils/gamin/distinfo
--- a/sysutils/gamin/distinfo	Mon Feb 18 12:28:41 2013 -0500
+++ b/sysutils/gamin/distinfo	Mon Feb 18 12:28:45 2013 -0500
@@ -17,3 +17,4 @@
 SHA1 (patch-server_gam__node.h) = 49a0d381b4900564c4f0ba7a654eb22e294c0a16
 SHA1 (patch-server_gam__subscription.c) = 58f6c10e4e1e899d097662536ea31bf8a692b114
 SHA1 (patch-server_gam__subscription.h) = 6347865210aa0338bc8b0a81fc671824c786fd26
+SHA1 (patch-aq) = c3d7a1f7ae26f6b6bfb9b80c1586bf9f9f70685e
diff -r daa3b77407dd sysutils/gamin/patches/patch-aq
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/sysutils/gamin/patches/patch-aq	Mon Feb 18 12:28:45 2013 -0500
@@ -0,0 +1,17 @@
+diff -r c02b16f5e18d server/gam_dnotify.c
+--- server/gam_dnotify.c	Fri Jul 20 00:43:51 2012 +0000
++++ server/gam_dnotify.c	Fri Jul 20 00:46:15 2012 +0000
+@@ -19,7 +19,13 @@
+ 
+ #include "server_config.h"
+ #define _GNU_SOURCE
++#if defined(__linux__) && !defined(__GLIBC__)
++/* need to do this nasty hack until/unless musl exposes the right #defines */
++#define HAVE_ARCH_STRUCT_FLOCK
++#include <linux/fcntl.h>
++#else
+ #include <fcntl.h>
++#endif
+ #include <signal.h>
+ #include <unistd.h>
+ #include <stdio.h>
