# HG changeset patch
# Parent f0346b28482d7975a0e90f86d19bca9ee94b127f

diff -r f0346b28482d sysutils/gamin/distinfo
--- a/sysutils/gamin/distinfo	Mon Jul 08 19:24:08 2013 -0400
+++ b/sysutils/gamin/distinfo	Mon Jul 08 19:24:16 2013 -0400
@@ -17,3 +17,4 @@
 SHA1 (patch-server_gam__node.h) = 49a0d381b4900564c4f0ba7a654eb22e294c0a16
 SHA1 (patch-server_gam__subscription.c) = 58f6c10e4e1e899d097662536ea31bf8a692b114
 SHA1 (patch-server_gam__subscription.h) = 6347865210aa0338bc8b0a81fc671824c786fd26
+SHA1 (patch-aq) = c3d7a1f7ae26f6b6bfb9b80c1586bf9f9f70685e
diff -r f0346b28482d sysutils/gamin/patches/patch-aq
--- /dev/null	Thu Jan 01 00:00:00 1970 +0000
+++ b/sysutils/gamin/patches/patch-aq	Mon Jul 08 19:24:16 2013 -0400
@@ -0,0 +1,17 @@
+diff -r c02b16f5e18d server/gam_dnotify.c
+--- server/gam_dnotify.c	Fri Jul 20 00:43:51 2012 +0000
++++ server/gam_dnotify.c	Fri Jul 20 00:46:15 2012 +0000
+@@ -19,7 +19,13 @@
+ 
+ #include "server_config.h"
+ #define _GNU_SOURCE
++#if defined(__linux__) && !defined(__GLIBC__)
++/* need to do this nasty hack until/unless musl exposes the right #defines */
++#define HAVE_ARCH_STRUCT_FLOCK
++#include <linux/fcntl.h>
++#else
+ #include <fcntl.h>
++#endif
+ #include <signal.h>
+ #include <unistd.h>
+ #include <stdio.h>
